<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter6 Week 6: Regression II | ENGE 5714 Course Notes 2021</title>
  <meta name="description" content="This is a test for organizing course notes in bookdown. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter6 Week 6: Regression II | ENGE 5714 Course Notes 2021" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a test for organizing course notes in bookdown. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter6 Week 6: Regression II | ENGE 5714 Course Notes 2021" />
  
  <meta name="twitter:description" content="This is a test for organizing course notes in bookdown. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Dr. Katz" />


<meta name="date" content="2021-03-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="week-5-simple-regression.html"/>
<link rel="next" href="week-7-logistic-regression.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">ENGE 5714 - Quantitative Research Methods</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preamble</a></li>
<li class="chapter" data-level="1" data-path="week-1-introductions.html"><a href="week-1-introductions.html"><i class="fa fa-check"></i><b>1</b> Week 1: Introductions</a></li>
<li class="chapter" data-level="2" data-path="week-2-intro-stats-data-distributions-intro-r-rstudio.html"><a href="week-2-intro-stats-data-distributions-intro-r-rstudio.html"><i class="fa fa-check"></i><b>2</b> Week 2: Intro stats, Data &amp; Distributions, Intro R &amp; RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="week-2-intro-stats-data-distributions-intro-r-rstudio.html"><a href="week-2-intro-stats-data-distributions-intro-r-rstudio.html#first-steps-in-r"><i class="fa fa-check"></i><b>2.1</b> First steps in R</a></li>
<li class="chapter" data-level="2.2" data-path="week-2-intro-stats-data-distributions-intro-r-rstudio.html"><a href="week-2-intro-stats-data-distributions-intro-r-rstudio.html#getting-your-r-environment-set-up"><i class="fa fa-check"></i><b>2.2</b> Getting your R environment set up</a></li>
<li class="chapter" data-level="2.3" data-path="week-2-intro-stats-data-distributions-intro-r-rstudio.html"><a href="week-2-intro-stats-data-distributions-intro-r-rstudio.html#reading-in-data"><i class="fa fa-check"></i><b>2.3</b> Reading in data</a></li>
<li class="chapter" data-level="2.4" data-path="week-2-intro-stats-data-distributions-intro-r-rstudio.html"><a href="week-2-intro-stats-data-distributions-intro-r-rstudio.html#exploring-the-data"><i class="fa fa-check"></i><b>2.4</b> Exploring the data</a></li>
<li class="chapter" data-level="2.5" data-path="week-2-intro-stats-data-distributions-intro-r-rstudio.html"><a href="week-2-intro-stats-data-distributions-intro-r-rstudio.html#plotting-data"><i class="fa fa-check"></i><b>2.5</b> Plotting data</a></li>
<li class="chapter" data-level="2.6" data-path="week-2-intro-stats-data-distributions-intro-r-rstudio.html"><a href="week-2-intro-stats-data-distributions-intro-r-rstudio.html#some-brief-stats"><i class="fa fa-check"></i><b>2.6</b> Some brief stats</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="week-2-intro-stats-data-distributions-intro-r-rstudio.html"><a href="week-2-intro-stats-data-distributions-intro-r-rstudio.html#central-limit-theorem-and-standard-error-demo--"><i class="fa fa-check"></i><b>2.6.1</b> Central Limit Theorem and Standard Error Demo —-</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="week-3-data-cleaning-organizing-describing-and-communicating.html"><a href="week-3-data-cleaning-organizing-describing-and-communicating.html"><i class="fa fa-check"></i><b>3</b> Week 3: Data Cleaning, Organizing, Describing, and Communicating</a>
<ul>
<li class="chapter" data-level="3.1" data-path="week-3-data-cleaning-organizing-describing-and-communicating.html"><a href="week-3-data-cleaning-organizing-describing-and-communicating.html#visualizing-your-data"><i class="fa fa-check"></i><b>3.1</b> Visualizing your data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="week-3-data-cleaning-organizing-describing-and-communicating.html"><a href="week-3-data-cleaning-organizing-describing-and-communicating.html#one-continuous-variable-either-predictor-or-outcome-variable"><i class="fa fa-check"></i><b>3.1.1</b> One continuous variable (either predictor or outcome variable)</a></li>
<li class="chapter" data-level="3.1.2" data-path="week-3-data-cleaning-organizing-describing-and-communicating.html"><a href="week-3-data-cleaning-organizing-describing-and-communicating.html#one-discrete-variable-either-predictor-or-outcome"><i class="fa fa-check"></i><b>3.1.2</b> One Discrete Variable (either predictor or outcome)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="week-3-data-cleaning-organizing-describing-and-communicating.html"><a href="week-3-data-cleaning-organizing-describing-and-communicating.html#joining-two-datasets"><i class="fa fa-check"></i><b>3.2</b> Joining two datasets</a></li>
<li class="chapter" data-level="3.3" data-path="week-3-data-cleaning-organizing-describing-and-communicating.html"><a href="week-3-data-cleaning-organizing-describing-and-communicating.html#discrete-predictor-continuous-outcome"><i class="fa fa-check"></i><b>3.3</b> Discrete Predictor, Continuous Outcome</a></li>
<li class="chapter" data-level="3.4" data-path="week-3-data-cleaning-organizing-describing-and-communicating.html"><a href="week-3-data-cleaning-organizing-describing-and-communicating.html#continuous-predictor-and-continuous-outcome"><i class="fa fa-check"></i><b>3.4</b> Continuous predictor and continuous outcome</a></li>
<li class="chapter" data-level="3.5" data-path="week-3-data-cleaning-organizing-describing-and-communicating.html"><a href="week-3-data-cleaning-organizing-describing-and-communicating.html#mutating-variables"><i class="fa fa-check"></i><b>3.5</b> Mutating Variables</a></li>
<li class="chapter" data-level="3.6" data-path="week-3-data-cleaning-organizing-describing-and-communicating.html"><a href="week-3-data-cleaning-organizing-describing-and-communicating.html#filtering-and-selecting"><i class="fa fa-check"></i><b>3.6</b> Filtering and Selecting</a></li>
<li class="chapter" data-level="3.7" data-path="week-3-data-cleaning-organizing-describing-and-communicating.html"><a href="week-3-data-cleaning-organizing-describing-and-communicating.html#grouping-and-summarizing"><i class="fa fa-check"></i><b>3.7</b> Grouping and Summarizing</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html"><i class="fa fa-check"></i><b>4</b> Week 4: Assumptions and Correlations</a>
<ul>
<li class="chapter" data-level="4.1" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#assumptions"><i class="fa fa-check"></i><b>4.1</b> Assumptions</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#normally-distributed-data"><i class="fa fa-check"></i><b>4.1.1</b> Normally distributed data</a></li>
<li class="chapter" data-level="4.1.2" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#homogeneity-of-variance"><i class="fa fa-check"></i><b>4.1.2</b> Homogeneity of variance</a></li>
<li class="chapter" data-level="4.1.3" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#interval-data"><i class="fa fa-check"></i><b>4.1.3</b> Interval data</a></li>
<li class="chapter" data-level="4.1.4" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#independence"><i class="fa fa-check"></i><b>4.1.4</b> Independence</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#correlation"><i class="fa fa-check"></i><b>4.2</b> Correlation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#covariance"><i class="fa fa-check"></i><b>4.2.1</b> Covariance</a></li>
<li class="chapter" data-level="4.2.2" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#correlation-coefficient"><i class="fa fa-check"></i><b>4.2.2</b> Correlation coefficient</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#another-worked-example-for-cleaning-and-prelim-analysis"><i class="fa fa-check"></i><b>4.3</b> Another worked example for cleaning and prelim analysis</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#loading-in-data"><i class="fa fa-check"></i><b>4.3.1</b> Loading in data</a></li>
<li class="chapter" data-level="4.3.2" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#data-prep-and-cleaning"><i class="fa fa-check"></i><b>4.3.2</b> Data prep and cleaning</a></li>
<li class="chapter" data-level="4.3.3" data-path="week-4-assumptions-and-correlations.html"><a href="week-4-assumptions-and-correlations.html#preliminary-analysis"><i class="fa fa-check"></i><b>4.3.3</b> Preliminary analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="week-5-simple-regression.html"><a href="week-5-simple-regression.html"><i class="fa fa-check"></i><b>5</b> Week 5: Simple Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="week-5-simple-regression.html"><a href="week-5-simple-regression.html#general-modeling-philosophy"><i class="fa fa-check"></i><b>5.1</b> General Modeling Philosophy</a></li>
<li class="chapter" data-level="5.2" data-path="week-5-simple-regression.html"><a href="week-5-simple-regression.html#data-generation-demo---one-set-sample-size"><i class="fa fa-check"></i><b>5.2</b> Data generation demo - one set sample size</a></li>
<li class="chapter" data-level="5.3" data-path="week-5-simple-regression.html"><a href="week-5-simple-regression.html#data-generation-demo---one-set-sample-size-1"><i class="fa fa-check"></i><b>5.3</b> Data generation demo - one set sample size;</a></li>
<li class="chapter" data-level="5.4" data-path="week-5-simple-regression.html"><a href="week-5-simple-regression.html#data-generation-with-three-different-sample-sizes"><i class="fa fa-check"></i><b>5.4</b> Data generation with three different sample sizes</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="week-6-regression-ii.html"><a href="week-6-regression-ii.html"><i class="fa fa-check"></i><b>6</b> Week 6: Regression II</a>
<ul>
<li class="chapter" data-level="6.1" data-path="week-6-regression-ii.html"><a href="week-6-regression-ii.html#explore-the-child-aggression-data-set"><i class="fa fa-check"></i><b>6.1</b> Explore the child aggression data set</a></li>
<li class="chapter" data-level="6.2" data-path="week-6-regression-ii.html"><a href="week-6-regression-ii.html#multiple-regression"><i class="fa fa-check"></i><b>6.2</b> Multiple regression</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="week-6-regression-ii.html"><a href="week-6-regression-ii.html#assumption-testing"><i class="fa fa-check"></i><b>6.2.1</b> Assumption testing</a></li>
<li class="chapter" data-level="6.2.2" data-path="week-6-regression-ii.html"><a href="week-6-regression-ii.html#detour-cumulative-distribution-function-cdf-empirical-cdf-and-qq-plot-discussion"><i class="fa fa-check"></i><b>6.2.2</b> Detour: Cumulative Distribution Function (CDF), empirical CDF, and QQ Plot Discussion</a></li>
<li class="chapter" data-level="6.2.3" data-path="week-6-regression-ii.html"><a href="week-6-regression-ii.html#generating-data-for-student-happiness-exercise."><i class="fa fa-check"></i><b>6.2.3</b> Generating data for student happiness exercise.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="week-7-logistic-regression.html"><a href="week-7-logistic-regression.html"><i class="fa fa-check"></i><b>7</b> Week 7: Logistic Regression</a>
<ul>
<li class="chapter" data-level="7.1" data-path="week-7-logistic-regression.html"><a href="week-7-logistic-regression.html#round-1---no-systematic-variation-in-outcomes"><i class="fa fa-check"></i><b>7.1</b> Round 1 - No systematic variation in outcomes</a></li>
<li class="chapter" data-level="7.2" data-path="week-7-logistic-regression.html"><a href="week-7-logistic-regression.html#round-2---systematic-varation-in-outcomes-as-a-function-of-discipline"><i class="fa fa-check"></i><b>7.2</b> Round 2 - Systematic varation in outcomes as a function of discipline</a></li>
<li class="chapter" data-level="7.3" data-path="week-7-logistic-regression.html"><a href="week-7-logistic-regression.html#round-3---systematic-varation-in-outcomes-as-a-function-of-discipline-and-gpa"><i class="fa fa-check"></i><b>7.3</b> Round 3 - Systematic varation in outcomes as a function of discipline and gpa</a></li>
<li class="chapter" data-level="7.4" data-path="week-7-logistic-regression.html"><a href="week-7-logistic-regression.html#round-4---gpa-and-persistence-vary-by-discipline"><i class="fa fa-check"></i><b>7.4</b> Round 4 - GPA and persistence vary by discipline</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="week-7-logistic-regression.html"><a href="week-7-logistic-regression.html#interlude-looking-at-poisson-distribution"><i class="fa fa-check"></i><b>7.4.1</b> Interlude looking at poisson distribution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="week-8-comparing-two-means-t-tests.html"><a href="week-8-comparing-two-means-t-tests.html"><i class="fa fa-check"></i><b>8</b> Week 8: Comparing two means (t-tests)</a>
<ul>
<li class="chapter" data-level="8.1" data-path="week-8-comparing-two-means-t-tests.html"><a href="week-8-comparing-two-means-t-tests.html#demo-1---comparing-salary-data-for-chemical-engineering-and-environmental-engineering"><i class="fa fa-check"></i><b>8.1</b> Demo 1 - Comparing salary data for chemical engineering and environmental engineering</a></li>
<li class="chapter" data-level="8.2" data-path="week-8-comparing-two-means-t-tests.html"><a href="week-8-comparing-two-means-t-tests.html#demo-2---student-sat-scores"><i class="fa fa-check"></i><b>8.2</b> Demo 2 - Student SAT scores</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ENGE 5714 Course Notes 2021</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="week-6-regression-ii" class="section level1" number="6">
<h1><span class="header-section-number">Chapter6</span> Week 6: Regression II</h1>
<p>This week we will be discussing multiple regression. We will use the child aggression data set as a running example for this.</p>
<div id="explore-the-child-aggression-data-set" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Explore the child aggression data set</h2>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="week-6-regression-ii.html#cb274-1" aria-hidden="true" tabindex="-1"></a>ca_df <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;ChildAggression.dat&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Method 1 for quickly getting summary statistics for the data you have, using the built-in summary() function</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="week-6-regression-ii.html#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ca_df)</span></code></pre></div>
<pre><code>##    Aggression          Television       Computer_Games      
##  Min.   :-1.295608   Min.   :-1.46012   Min.   :-1.1538345  
##  1st Qu.:-0.174279   1st Qu.:-0.18206   1st Qu.:-0.1687007  
##  Median :-0.005548   Median :-0.01247   Median :-0.0001997  
##  Mean   :-0.005011   Mean   :-0.02758   Mean   : 0.0103812  
##  3rd Qu.: 0.149611   3rd Qu.: 0.14983   3rd Qu.: 0.1881810  
##  Max.   : 1.178823   Max.   : 0.98162   Max.   : 1.6175039  
##  Sibling_Aggression       Diet          Parenting_Style   
##  Min.   :-1.433127   Min.   :-1.28490   Min.   :-4.46041  
##  1st Qu.:-0.156414   1st Qu.:-0.16136   1st Qu.:-0.58008  
##  Median : 0.008459   Median : 0.00934   Median : 0.02736  
##  Mean   : 0.008275   Mean   : 0.01162   Mean   : 0.00000  
##  3rd Qu.: 0.185136   3rd Qu.: 0.18708   3rd Qu.: 0.51784  
##  Max.   : 1.103671   Max.   : 1.22383   Max.   : 3.99326</code></pre>
<p>Method 2, using the describe() function from the psych package</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="week-6-regression-ii.html#cb277-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(ca_df)</span></code></pre></div>
<pre><code>##                    vars   n  mean   sd median trimmed  mad   min  max range
## Aggression            1 666 -0.01 0.32  -0.01   -0.01 0.24 -1.30 1.18  2.47
## Television            2 666 -0.03 0.31  -0.01   -0.02 0.25 -1.46 0.98  2.44
## Computer_Games        3 666  0.01 0.34   0.00    0.00 0.27 -1.15 1.62  2.77
## Sibling_Aggression    4 666  0.01 0.33   0.01    0.01 0.26 -1.43 1.10  2.54
## Diet                  5 666  0.01 0.34   0.01    0.01 0.26 -1.28 1.22  2.51
## Parenting_Style       6 666  0.00 1.00   0.03    0.01 0.82 -4.46 3.99  8.45
##                     skew kurtosis   se
## Aggression         -0.02     1.61 0.01
## Television         -0.36     1.34 0.01
## Computer_Games      0.25     1.60 0.01
## Sibling_Aggression -0.17     1.40 0.01
## Diet               -0.12     1.51 0.01
## Parenting_Style    -0.22     1.67 0.04</code></pre>
<p>Spot check: where do the “se” values come from?</p>
<p>Now that we have seen some of the numbers, let’s try to visualize some of these data. Let’s try to visualize the data while we’re at it</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="week-6-regression-ii.html#cb279-1" aria-hidden="true" tabindex="-1"></a>ca_df <span class="sc">%&gt;%</span> </span>
<span id="cb279-2"><a href="week-6-regression-ii.html#cb279-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Aggression)) <span class="sc">+</span></span>
<span id="cb279-3"><a href="week-6-regression-ii.html#cb279-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-98-1.png" width="672" /></p>
<p>We could do this for each of our variables or we could try something a little fancier by using the pivot_longer() function to make a longer dataframe and plot everything at once</p>
<p>First, create the long dataframe. After running this command, it’s a good idea to view the new data frame to make sure this did what you intended</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="week-6-regression-ii.html#cb281-1" aria-hidden="true" tabindex="-1"></a>ca_df_long <span class="ot">&lt;-</span> ca_df <span class="sc">%&gt;%</span> </span>
<span id="cb281-2"><a href="week-6-regression-ii.html#cb281-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> Aggression<span class="sc">:</span>Parenting_Style, <span class="at">names_to =</span> <span class="st">&quot;variable_name&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;variable_value&quot;</span>)</span></code></pre></div>
<p>After making sure everything looks in order, run the same plot command with the addition of a facet.</p>
<p>Note that the fill = variable_name tells R to color the plot with different colors by variable_name and the theme(…) tells R to get rid of the legend that automatically shows up</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="week-6-regression-ii.html#cb282-1" aria-hidden="true" tabindex="-1"></a>ca_df_long <span class="sc">%&gt;%</span> </span>
<span id="cb282-2"><a href="week-6-regression-ii.html#cb282-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> variable_value, <span class="at">fill =</span> variable_name)) <span class="sc">+</span></span>
<span id="cb282-3"><a href="week-6-regression-ii.html#cb282-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb282-4"><a href="week-6-regression-ii.html#cb282-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(variable_name <span class="sc">~</span>.) <span class="sc">+</span></span>
<span id="cb282-5"><a href="week-6-regression-ii.html#cb282-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-100-1.png" width="672" /></p>
<p>From this we should be able to see that everything is normally distributed and appears to be standardized</p>
<p>Let’s try a different kind of visualization: the empirical cumulative distribution function (eCDF) (sounds fancy, but it’s not bad)</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="week-6-regression-ii.html#cb284-1" aria-hidden="true" tabindex="-1"></a>ca_df_long <span class="sc">%&gt;%</span> </span>
<span id="cb284-2"><a href="week-6-regression-ii.html#cb284-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> variable_value)) <span class="sc">+</span></span>
<span id="cb284-3"><a href="week-6-regression-ii.html#cb284-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_ecdf</span>(<span class="at">geom =</span> <span class="st">&quot;point&quot;</span>) <span class="sc">+</span></span>
<span id="cb284-4"><a href="week-6-regression-ii.html#cb284-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(variable_name <span class="sc">~</span>.) </span></code></pre></div>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-101-1.png" width="672" /></p>
<p>It looks like a bunch of distorted s shapes. In order to understand what is going on here, we should take a brief detour into the world of cumulative distribution functions (CDFs), eCDFs, and eventually QQ plots. This detour is at the end of the markdown file.</p>
<p>Now we can try a third way of visualizing our data - QQ plots!</p>
<p>As before, we can plot each variable with separate calls or plot them all together with the long data frame</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="week-6-regression-ii.html#cb285-1" aria-hidden="true" tabindex="-1"></a>ca_df <span class="sc">%&gt;%</span> </span>
<span id="cb285-2"><a href="week-6-regression-ii.html#cb285-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">sample=</span>Aggression)) <span class="sc">+</span></span>
<span id="cb285-3"><a href="week-6-regression-ii.html#cb285-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq</span>() <span class="sc">+</span></span>
<span id="cb285-4"><a href="week-6-regression-ii.html#cb285-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq_line</span>()</span></code></pre></div>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-102-1.png" width="672" /></p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="week-6-regression-ii.html#cb286-1" aria-hidden="true" tabindex="-1"></a>ca_df_long <span class="sc">%&gt;%</span> </span>
<span id="cb286-2"><a href="week-6-regression-ii.html#cb286-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">sample=</span>variable_value)) <span class="sc">+</span></span>
<span id="cb286-3"><a href="week-6-regression-ii.html#cb286-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq</span>() <span class="sc">+</span></span>
<span id="cb286-4"><a href="week-6-regression-ii.html#cb286-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq_line</span>() <span class="sc">+</span></span>
<span id="cb286-5"><a href="week-6-regression-ii.html#cb286-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(variable_name <span class="sc">~</span> .)</span></code></pre></div>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-103-1.png" width="672" /></p>
</div>
<div id="multiple-regression" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Multiple regression</h2>
<p>Let’s create a model of child aggression as a function of parenting style and sibling aggression</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="week-6-regression-ii.html#cb287-1" aria-hidden="true" tabindex="-1"></a>model_fam <span class="ot">&lt;-</span> <span class="fu">lm</span>(Aggression <span class="sc">~</span> Parenting_Style <span class="sc">+</span> Sibling_Aggression, <span class="at">data =</span> ca_df)</span></code></pre></div>
<p>Run the summary on the model</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="week-6-regression-ii.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_fam)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Aggression ~ Parenting_Style + Sibling_Aggression, 
##     data = ca_df)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.09755 -0.17180  0.00092  0.15405  1.23037 
## 
## Coefficients:
##                     Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)        -0.005784   0.012065  -0.479    0.632    
## Parenting_Style     0.061984   0.012257   5.057 5.51e-07 ***
## Sibling_Aggression  0.093409   0.037505   2.491    0.013 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.3113 on 663 degrees of freedom
## Multiple R-squared:  0.05325,    Adjusted R-squared:  0.05039 
## F-statistic: 18.64 on 2 and 663 DF,  p-value: 1.325e-08</code></pre>
<p>This will be helpful later when we want to plot the residuals of the model.</p>
<p>Let’s create another model of child aggression as a function of computer games and television.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="week-6-regression-ii.html#cb290-1" aria-hidden="true" tabindex="-1"></a>model_screens <span class="ot">&lt;-</span> <span class="fu">lm</span>(Aggression <span class="sc">~</span> Computer_Games <span class="sc">+</span> Television, <span class="at">data =</span> ca_df)</span>
<span id="cb290-2"><a href="week-6-regression-ii.html#cb290-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb290-3"><a href="week-6-regression-ii.html#cb290-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_screens)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Aggression ~ Computer_Games + Television, data = ca_df)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.05234 -0.15191 -0.00512  0.15156  1.24062 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)    -0.002879   0.012132  -0.237 0.812526    
## Computer_Games  0.153874   0.035845   4.293 2.03e-05 ***
## Television      0.135263   0.039546   3.420 0.000664 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.3115 on 663 degrees of freedom
## Multiple R-squared:  0.05149,    Adjusted R-squared:  0.04862 
## F-statistic: 17.99 on 2 and 663 DF,  p-value: 2.455e-08</code></pre>
<p>Now let’s see what the full model looks like with all five predictors</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="week-6-regression-ii.html#cb292-1" aria-hidden="true" tabindex="-1"></a>model_all <span class="ot">&lt;-</span> <span class="fu">lm</span>(Aggression <span class="sc">~</span> Parenting_Style <span class="sc">+</span> Sibling_Aggression <span class="sc">+</span> Diet <span class="sc">+</span> Computer_Games <span class="sc">+</span> Television, </span>
<span id="cb292-2"><a href="week-6-regression-ii.html#cb292-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> ca_df)</span>
<span id="cb292-3"><a href="week-6-regression-ii.html#cb292-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_all)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Aggression ~ Parenting_Style + Sibling_Aggression + 
##     Diet + Computer_Games + Television, data = ca_df)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.12629 -0.15253 -0.00421  0.15222  1.17669 
## 
## Coefficients:
##                     Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)        -0.004988   0.011983  -0.416 0.677350    
## Parenting_Style     0.056648   0.014557   3.891 0.000110 ***
## Sibling_Aggression  0.081684   0.038780   2.106 0.035550 *  
## Diet               -0.109054   0.038076  -2.864 0.004315 ** 
## Computer_Games      0.142161   0.036920   3.851 0.000129 ***
## Television          0.032916   0.046057   0.715 0.475059    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.3071 on 660 degrees of freedom
## Multiple R-squared:  0.08258,    Adjusted R-squared:  0.07563 
## F-statistic: 11.88 on 5 and 660 DF,  p-value: 5.025e-11</code></pre>
<p>We can get the output from the summary() function but as a tibble instead:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="week-6-regression-ii.html#cb294-1" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(model_all, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##   term               estimate std.error statistic  p.value conf.low conf.high
##   &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)        -0.00499    0.0120    -0.416 0.677    -0.0285     0.0185
## 2 Parenting_Style     0.0566     0.0146     3.89  0.000110  0.0281     0.0852
## 3 Sibling_Aggression  0.0817     0.0388     2.11  0.0355    0.00554    0.158 
## 4 Diet               -0.109      0.0381    -2.86  0.00432  -0.184     -0.0343
## 5 Computer_Games      0.142      0.0369     3.85  0.000129  0.0697     0.215 
## 6 Television          0.0329     0.0461     0.715 0.475    -0.0575     0.123</code></pre>
<p>We can also get summary statistics like the R^2, F-statistics, and AIC from the glance() function in the Broom package</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="week-6-regression-ii.html#cb296-1" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">glance</span>(model_all)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 12
##   r.squared adj.r.squared sigma statistic  p.value    df logLik   AIC   BIC
##       &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1    0.0826        0.0756 0.307      11.9 5.02e-11     5  -156.  325.  357.
## # ... with 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
<p>Let’s stop here to interpret what the model output is telling us(specifically, the coefficient estimates, the standard errors, the p values, and the R^2 values).</p>
<p>Notice the Television p value and standard errors (especially how the estimate is so close to zero, and its 95% confidence interval crosses 0)</p>
<p>We can also have R handle factors automatically in a regression model for us.</p>
<p>First, we will generate a new factor for the child aggression data - the handedness of the child (left vs right).</p>
<p>This code generates a random handedness for each of the 666 students and assigns it to a new column in ca_df</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="week-6-regression-ii.html#cb298-1" aria-hidden="true" tabindex="-1"></a>handed_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;right&quot;</span>)</span>
<span id="cb298-2"><a href="week-6-regression-ii.html#cb298-2" aria-hidden="true" tabindex="-1"></a>handed_vector <span class="ot">&lt;-</span> <span class="fu">sample</span>(handed_levels, <span class="at">size =</span> <span class="fu">nrow</span>(ca_df), <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.6</span>))</span>
<span id="cb298-3"><a href="week-6-regression-ii.html#cb298-3" aria-hidden="true" tabindex="-1"></a>ca_df<span class="sc">$</span>Handedness <span class="ot">&lt;-</span> handed_vector</span></code></pre></div>
<p>Check to make sure we have all the predictor names correct to add into the linear model.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="week-6-regression-ii.html#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ca_df)</span></code></pre></div>
<pre><code>## [1] &quot;Aggression&quot;         &quot;Television&quot;         &quot;Computer_Games&quot;    
## [4] &quot;Sibling_Aggression&quot; &quot;Diet&quot;               &quot;Parenting_Style&quot;   
## [7] &quot;Handedness&quot;</code></pre>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="week-6-regression-ii.html#cb301-1" aria-hidden="true" tabindex="-1"></a>model_all_3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Aggression <span class="sc">~</span> Parenting_Style <span class="sc">+</span> Sibling_Aggression <span class="sc">+</span> Television <span class="sc">+</span> Computer_Games <span class="sc">+</span> Diet <span class="sc">+</span> Handedness, <span class="at">data =</span> ca_df)</span></code></pre></div>
<p>Check the model summary and notice how the Handedness predictor variable was handled.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="week-6-regression-ii.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_all_3)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Aggression ~ Parenting_Style + Sibling_Aggression + 
##     Television + Computer_Games + Diet + Handedness, data = ca_df)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.1223 -0.1536 -0.0040  0.1495  1.1798 
## 
## Coefficients:
##                      Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)         0.0003317  0.0187949   0.018 0.985926    
## Parenting_Style     0.0562165  0.0146137   3.847 0.000131 ***
## Sibling_Aggression  0.0814332  0.0388111   2.098 0.036268 *  
## Television          0.0337678  0.0461457   0.732 0.464572    
## Computer_Games      0.1430242  0.0370183   3.864 0.000123 ***
## Diet               -0.1094837  0.0381193  -2.872 0.004208 ** 
## Handednessright    -0.0089557  0.0243655  -0.368 0.713323    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.3073 on 659 degrees of freedom
## Multiple R-squared:  0.08277,    Adjusted R-squared:  0.07442 
## F-statistic: 9.911 on 6 and 659 DF,  p-value: 1.739e-10</code></pre>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="week-6-regression-ii.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(Aggression <span class="sc">~</span> ., <span class="at">data=</span>ca_df)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Aggression ~ ., data = ca_df)
## 
## Coefficients:
##        (Intercept)          Television      Computer_Games  Sibling_Aggression  
##          0.0003317           0.0337678           0.1430242           0.0814332  
##               Diet     Parenting_Style     Handednessright  
##         -0.1094837           0.0562165          -0.0089557</code></pre>
<div id="assumption-testing" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Assumption testing</h3>
<p>Note: A lot of the things we are doing here can be accomplished with the augment() function in the broom package</p>
<p>Check for correlation between adjacent residual terms using Durbin-Watson test</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="week-6-regression-ii.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dwt</span>(model_all)</span></code></pre></div>
<pre><code>##  lag Autocorrelation D-W Statistic p-value
##    1      0.04218005      1.912808   0.236
##  Alternative hypothesis: rho != 0</code></pre>
<p>Check for multicollinearity.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="week-6-regression-ii.html#cb308-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">vif</span>(model_all)</span></code></pre></div>
<pre><code>##    Parenting_Style Sibling_Aggression               Diet     Computer_Games 
##           1.494296           1.132618           1.160466           1.122719 
##         Television 
##           1.435525</code></pre>
<p>Now let’s go back and check for influential cases following the procedure Field does in the textbook.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="week-6-regression-ii.html#cb310-1" aria-hidden="true" tabindex="-1"></a>ca_df<span class="sc">$</span>residuals <span class="ot">&lt;-</span> <span class="fu">resid</span>(model_all) <span class="co"># notice how this is the same as looking at View(model_all) and then residuals or model_all$residuals</span></span>
<span id="cb310-2"><a href="week-6-regression-ii.html#cb310-2" aria-hidden="true" tabindex="-1"></a><span class="co">#model_all$residuals</span></span>
<span id="cb310-3"><a href="week-6-regression-ii.html#cb310-3" aria-hidden="true" tabindex="-1"></a>ca_df<span class="sc">$</span>standardized.residuals <span class="ot">&lt;-</span> <span class="fu">rstandard</span>(model_all)</span>
<span id="cb310-4"><a href="week-6-regression-ii.html#cb310-4" aria-hidden="true" tabindex="-1"></a>ca_df<span class="sc">$</span>studentized.residuals <span class="ot">&lt;-</span> <span class="fu">rstudent</span>(model_all)</span>
<span id="cb310-5"><a href="week-6-regression-ii.html#cb310-5" aria-hidden="true" tabindex="-1"></a>ca_df<span class="sc">$</span>cooks.distance <span class="ot">&lt;-</span> <span class="fu">cooks.distance</span>(model_all)</span>
<span id="cb310-6"><a href="week-6-regression-ii.html#cb310-6" aria-hidden="true" tabindex="-1"></a>ca_df<span class="sc">$</span>dfbeta <span class="ot">&lt;-</span> <span class="fu">dfbeta</span>(model_all)</span>
<span id="cb310-7"><a href="week-6-regression-ii.html#cb310-7" aria-hidden="true" tabindex="-1"></a>ca_df<span class="sc">$</span>dffit <span class="ot">&lt;-</span> <span class="fu">dffits</span>(model_all)</span>
<span id="cb310-8"><a href="week-6-regression-ii.html#cb310-8" aria-hidden="true" tabindex="-1"></a>ca_df<span class="sc">$</span>leverage <span class="ot">&lt;-</span> <span class="fu">hatvalues</span>(model_all)</span>
<span id="cb310-9"><a href="week-6-regression-ii.html#cb310-9" aria-hidden="true" tabindex="-1"></a>ca_df<span class="sc">$</span>covariance.ratios <span class="ot">&lt;-</span> <span class="fu">covratio</span>(model_all)</span></code></pre></div>
<p>Now that we have all of the extra model fit statistics calculated, we can add a new olumn using a different method than what he does in the textbook (but this accomplishes the same task).</p>
<p>We are using a combination of mutate() and case_when() instead of the traditional logical test subsetting that we see in the bookon pp. 289-290</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="week-6-regression-ii.html#cb311-1" aria-hidden="true" tabindex="-1"></a>ca_df <span class="ot">&lt;-</span> ca_df <span class="sc">%&gt;%</span> </span>
<span id="cb311-2"><a href="week-6-regression-ii.html#cb311-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">large.residual =</span> <span class="fu">case_when</span>(standardized.residuals <span class="sc">&gt;</span> <span class="dv">2</span> <span class="sc">|</span> standardized.residuals <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">2</span> <span class="sc">~</span> <span class="cn">TRUE</span>,</span>
<span id="cb311-3"><a href="week-6-regression-ii.html#cb311-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">abs</span>(standardized.residuals) <span class="sc">&lt;=</span> <span class="dv">2</span> <span class="sc">~</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<p>Now let’s just look at the observations where there was a large residual (absolute value &gt; 2)</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="week-6-regression-ii.html#cb312-1" aria-hidden="true" tabindex="-1"></a>ca_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(large.residual <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Aggression  Television Computer_Games Sibling_Aggression       Diet
## 1  0.7711534 -0.03287184     0.70991822        0.576836667 -0.0229903
## 2 -0.9309839 -0.14695730     0.58503832        0.143914123  0.1341567
## 3  0.8437696 -0.53337187     0.62674291        0.006193792 -0.0542531
## 4 -0.8604237 -0.32734996    -0.10228524        0.088454410  0.3403472
## 5  0.7374707  0.05104538     0.06804261        0.742478946  0.3607529
## 6  0.6158280 -0.17945254    -0.14381635        0.337002793 -0.5992525
##   Parenting_Style Handedness  residuals standardized.residuals
## 1      -1.2481665       left  0.6973813               2.289855
## 2      -1.0470961      right -0.9421375              -3.081966
## 3       0.2386578      right  0.7572738               2.484122
## 4      -0.6988965       left -0.7606374              -2.483667
## 5       0.9243197      right  0.6574374               2.152417
## 6      -1.0334894      right  0.6128345               2.006389
##   studentized.residuals cooks.distance dfbeta.(Intercept)
## 1              2.297263    0.014610960       0.0010048327
## 2             -3.102033    0.014474124      -0.0013336489
## 3              2.493925    0.015185553       0.0008375093
## 4             -2.493465    0.005595170      -0.0010247662
## 5              2.158374    0.008347004       0.0008799517
## 6              2.011011    0.007252602       0.0009296294
##   dfbeta.Parenting_Style dfbeta.Sibling_Aggression   dfbeta.Diet
## 1          -0.0022102310              0.0053377408 -0.0015602060
## 2           0.0022877988             -0.0008058492 -0.0011872151
## 3           0.0016068696              0.0002508274 -0.0028943101
## 4           0.0006636867             -0.0011984511 -0.0042173119
## 5           0.0008756410              0.0069052922  0.0014075292
## 6          -0.0005401040              0.0047888699 -0.0054530647
##   dfbeta.Computer_Games dfbeta.Television      dffit    leverage
## 1          0.0067966200      0.0013345865  0.2970419 0.016444209
## 2         -0.0079629954     -0.0003344591 -0.2966131 0.009060145
## 3          0.0072143563     -0.0098994502  0.3030411 0.014550253
## 4          0.0015183740      0.0029152017 -0.1839467 0.005412783
## 5         -0.0015476206     -0.0021915865  0.2244095 0.010694476
## 6         -0.0004611714     -0.0010521222  0.2090845 0.010694131
##   covariance.ratios large.residual
## 1         0.9780649           TRUE
## 2         0.9335336           TRUE
## 3         0.9679182           TRUE
## 4         0.9590456           TRUE
## 5         0.9778335           TRUE
## 6         0.9832825           TRUE</code></pre>
<p>There’s a problem here because we don’t preserve observation numbers. In general, it might be a good idea to give each observation an ID with something like</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="week-6-regression-ii.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(ca_df)[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 666</code></pre>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="week-6-regression-ii.html#cb316-1" aria-hidden="true" tabindex="-1"></a>ca_df <span class="ot">&lt;-</span> ca_df <span class="sc">%&gt;%</span> </span>
<span id="cb316-2"><a href="week-6-regression-ii.html#cb316-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">dim</span>(ca_df)[<span class="dv">1</span>]))</span></code></pre></div>
<p>In the tidyverse, there is an even simpler way to do this with the rowid_to_column() function!</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="week-6-regression-ii.html#cb317-1" aria-hidden="true" tabindex="-1"></a>ca_df <span class="ot">&lt;-</span> ca_df <span class="sc">%&gt;%</span> </span>
<span id="cb317-2"><a href="week-6-regression-ii.html#cb317-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">&quot;participant_id&quot;</span>)</span></code></pre></div>
<p>Now we can run the filter again and see which observations have large residuals</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="week-6-regression-ii.html#cb318-1" aria-hidden="true" tabindex="-1"></a>ca_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(large.residual <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">view</span>()</span></code></pre></div>
<p>Plot the residuals against the fitted values</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="week-6-regression-ii.html#cb319-1" aria-hidden="true" tabindex="-1"></a>ca_df<span class="sc">$</span>fitted <span class="ot">&lt;-</span> model_all<span class="sc">$</span>fitted.values</span></code></pre></div>
<p>First, plot the distribution of the residuals by themselves</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="week-6-regression-ii.html#cb320-1" aria-hidden="true" tabindex="-1"></a>histogram <span class="ot">&lt;-</span> ca_df <span class="sc">%&gt;%</span> </span>
<span id="cb320-2"><a href="week-6-regression-ii.html#cb320-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> studentized.residuals)) <span class="sc">+</span></span>
<span id="cb320-3"><a href="week-6-regression-ii.html#cb320-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..)) <span class="sc">+</span></span>
<span id="cb320-4"><a href="week-6-regression-ii.html#cb320-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Studentized Residuals&quot;</span>,</span>
<span id="cb320-5"><a href="week-6-regression-ii.html#cb320-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Density&quot;</span>)</span>
<span id="cb320-6"><a href="week-6-regression-ii.html#cb320-6" aria-hidden="true" tabindex="-1"></a>histogram</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-123-1.png" width="672" /></p>
<p>Now let’s add a normal density on top of that for comparison</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="week-6-regression-ii.html#cb322-1" aria-hidden="true" tabindex="-1"></a>histogram <span class="sc">+</span> <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, </span>
<span id="cb322-2"><a href="week-6-regression-ii.html#cb322-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> <span class="fu">mean</span>(ca_df<span class="sc">$</span>studentized.residuals, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb322-3"><a href="week-6-regression-ii.html#cb322-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">sd =</span> <span class="fu">sd</span>(ca_df<span class="sc">$</span>studentized.residuals, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)), </span>
<span id="cb322-4"><a href="week-6-regression-ii.html#cb322-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-124-1.png" width="672" /></p>
<p>Second, plot the residuals against the fitted values to make sure there are no systematic patterns</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="week-6-regression-ii.html#cb324-1" aria-hidden="true" tabindex="-1"></a>ca_df <span class="sc">%&gt;%</span> </span>
<span id="cb324-2"><a href="week-6-regression-ii.html#cb324-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fitted, <span class="at">y =</span> studentized.residuals)) <span class="sc">+</span></span>
<span id="cb324-3"><a href="week-6-regression-ii.html#cb324-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb324-4"><a href="week-6-regression-ii.html#cb324-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb324-5"><a href="week-6-regression-ii.html#cb324-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Fitted Residual&quot;</span>,</span>
<span id="cb324-6"><a href="week-6-regression-ii.html#cb324-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Studentized Residual&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-125-1.png" width="672" /></p>
<p>We can also skip all the fancy code from the book and use the plot() function on the model.</p>
<p>R knows that this means we want to plot four fit plots</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="week-6-regression-ii.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>)) <span class="co"># this changes the arrangement for the plots to show two rows and two columns of plots</span></span></code></pre></div>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="week-6-regression-ii.html#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model_all)</span></code></pre></div>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-127-1.png" width="672" /><img src="test_course_notes_files/figure-html/unnamed-chunk-127-2.png" width="672" /><img src="test_course_notes_files/figure-html/unnamed-chunk-127-3.png" width="672" /><img src="test_course_notes_files/figure-html/unnamed-chunk-127-4.png" width="672" /></p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="week-6-regression-ii.html#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)) <span class="co"># this changes the plotting arrangement back to the default of one plot at a time</span></span></code></pre></div>
<p>Note that we could also create a model that uses all our covariates as predictors with the following call</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="week-6-regression-ii.html#cb329-1" aria-hidden="true" tabindex="-1"></a>model_all_2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Aggression <span class="sc">~</span> ., <span class="at">data=</span>ca_df)</span></code></pre></div>
<p>Inspect the results to make sure it is giving the same results as before</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="week-6-regression-ii.html#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model_all_2)</span></code></pre></div>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-129-1.png" width="672" /><img src="test_course_notes_files/figure-html/unnamed-chunk-129-2.png" width="672" /><img src="test_course_notes_files/figure-html/unnamed-chunk-129-3.png" width="672" /><img src="test_course_notes_files/figure-html/unnamed-chunk-129-4.png" width="672" /></p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="week-6-regression-ii.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_all_2)</span></code></pre></div>
<pre><code>## Warning in summary.lm(model_all_2): essentially perfect fit: summary may be
## unreliable</code></pre>
<pre><code>## 
## Call:
## lm(formula = Aggression ~ ., data = ca_df)
## 
## Residuals:
##        Min         1Q     Median         3Q        Max 
## -3.287e-15 -3.000e-17  5.500e-18  3.940e-17  5.010e-15 
## 
## Coefficients: (2 not defined because of singularities)
##                            Estimate Std. Error    t value Pr(&gt;|t|)    
## (Intercept)              -4.988e-03  1.526e-15 -3.269e+12  &lt; 2e-16 ***
## participant_id            3.942e-19  5.795e-20  6.802e+00 2.35e-11 ***
## Television                3.292e-02  4.325e-17  7.610e+14  &lt; 2e-16 ***
## Computer_Games            1.422e-01  3.476e-17  4.090e+15  &lt; 2e-16 ***
## Sibling_Aggression        8.168e-02  3.636e-17  2.247e+15  &lt; 2e-16 ***
## Diet                     -1.091e-01  3.592e-17 -3.036e+15  &lt; 2e-16 ***
## Parenting_Style           5.665e-02  1.371e-17  4.132e+15  &lt; 2e-16 ***
## Handednessright          -2.311e-17  2.266e-17 -1.020e+00    0.308    
## residuals                 1.000e+00  2.920e-12  3.424e+11  &lt; 2e-16 ***
## standardized.residuals    1.027e-12  1.746e-12  5.880e-01    0.557    
## studentized.residuals    -5.539e-16  4.211e-15 -1.320e-01    0.895    
## cooks.distance            4.188e-15  3.962e-15  1.057e+00    0.291    
## dfbeta(Intercept)        -1.074e-09  1.842e-09 -5.830e-01    0.560    
## dfbetaParenting_Style     2.896e-14  2.120e-14  1.366e+00    0.172    
## dfbetaSibling_Aggression -8.907e-12  1.524e-11 -5.840e-01    0.559    
## dfbetaDiet               -1.248e-11  2.140e-11 -5.830e-01    0.560    
## dfbetaComputer_Games     -1.116e-11  1.912e-11 -5.840e-01    0.560    
## dfbetaTelevision          2.963e-11  5.079e-11  5.830e-01    0.560    
## dffit                    -2.272e-15  3.951e-15 -5.750e-01    0.565    
## leverage                 -3.102e-15  2.493e-15 -1.244e+00    0.214    
## covariance.ratios         2.302e-16  1.520e-15  1.510e-01    0.880    
## large.residualTRUE       -8.634e-17  8.636e-17 -1.000e+00    0.318    
## ID                               NA         NA         NA       NA    
## fitted                           NA         NA         NA       NA    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.831e-16 on 644 degrees of freedom
## Multiple R-squared:      1,  Adjusted R-squared:      1 
## F-statistic: 4.03e+31 on 21 and 644 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Check how augment() works and which parts of the above it replicates</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="week-6-regression-ii.html#cb334-1" aria-hidden="true" tabindex="-1"></a>augmented_model_all <span class="ot">&lt;-</span> <span class="fu">augment</span>(model_all)</span></code></pre></div>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="week-6-regression-ii.html#cb335-1" aria-hidden="true" tabindex="-1"></a>ca_df_long <span class="sc">%&gt;%</span> </span>
<span id="cb335-2"><a href="week-6-regression-ii.html#cb335-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> variable_value, <span class="at">fill =</span> variable_name)) <span class="sc">+</span></span>
<span id="cb335-3"><a href="week-6-regression-ii.html#cb335-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">position =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-131-1.png" width="672" /></p>
</div>
<div id="detour-cumulative-distribution-function-cdf-empirical-cdf-and-qq-plot-discussion" class="section level3" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Detour: Cumulative Distribution Function (CDF), empirical CDF, and QQ Plot Discussion</h3>
<p>Our goal here is to visualize the cumulative distribution function for a normal distribution as a stepping stone toward undestanding QQ plots. We will use plots of the empirical cumulative distribution function (eCDF)</p>
<p>As a way to visualize our data. Although we have not discussed eCDFs before, they are another tool you can use to visualize the distribution of quantitative data.</p>
<p>We will also look at the effect of sample size on the kinds of plots that we may make when visualizing the distribution of data.</p>
<p>First, let’s generate some data to help us see what these concepts are all about.</p>
<p><strong>Note</strong> that We are generating data to make things easier on ourselves - we know the underlying data-generating process. So that lets us form an expectation of what <em>should</em> happen. These kinds of toy examples can be helpful for building an intuition about these concepts that we can then use in our own work.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="week-6-regression-ii.html#cb337-1" aria-hidden="true" tabindex="-1"></a>df_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">25</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">digits =</span> <span class="dv">1</span>), <span class="at">samp_size =</span> <span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">25</span>, <span class="at">times =</span> <span class="dv">25</span>))</span>
<span id="cb337-2"><a href="week-6-regression-ii.html#cb337-2" aria-hidden="true" tabindex="-1"></a>df_2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">50</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">digits =</span> <span class="dv">1</span>), <span class="at">samp_size =</span> <span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">50</span>, <span class="at">times =</span> <span class="dv">50</span>))</span>
<span id="cb337-3"><a href="week-6-regression-ii.html#cb337-3" aria-hidden="true" tabindex="-1"></a>df_3 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">digits =</span> <span class="dv">1</span>), <span class="at">samp_size =</span> <span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">100</span>, <span class="at">times =</span> <span class="dv">100</span>))</span>
<span id="cb337-4"><a href="week-6-regression-ii.html#cb337-4" aria-hidden="true" tabindex="-1"></a>df_4 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">200</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">digits =</span> <span class="dv">1</span>), <span class="at">samp_size =</span> <span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">200</span>, <span class="at">times =</span> <span class="dv">200</span>))</span>
<span id="cb337-5"><a href="week-6-regression-ii.html#cb337-5" aria-hidden="true" tabindex="-1"></a>df_5 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">500</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">digits =</span> <span class="dv">1</span>), <span class="at">samp_size =</span> <span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">500</span>, <span class="at">times =</span> <span class="dv">500</span>))</span></code></pre></div>
<p>Combine the generated data together into one data frame to make it easy to plot everything in one ggplot call.</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="week-6-regression-ii.html#cb338-1" aria-hidden="true" tabindex="-1"></a>sample_df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(df_1, df_2, df_3, df_4, df_5)</span></code></pre></div>
<p>Look at the empirical CDFs</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="week-6-regression-ii.html#cb339-1" aria-hidden="true" tabindex="-1"></a>sample_df <span class="sc">%&gt;%</span> </span>
<span id="cb339-2"><a href="week-6-regression-ii.html#cb339-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x)) <span class="sc">+</span></span>
<span id="cb339-3"><a href="week-6-regression-ii.html#cb339-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_ecdf</span>(<span class="at">geom =</span> <span class="st">&quot;point&quot;</span>) <span class="sc">+</span></span>
<span id="cb339-4"><a href="week-6-regression-ii.html#cb339-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(samp_size<span class="sc">~</span>.)</span></code></pre></div>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-134-1.png" width="672" /></p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="week-6-regression-ii.html#cb340-1" aria-hidden="true" tabindex="-1"></a>sample_df <span class="sc">%&gt;%</span> </span>
<span id="cb340-2"><a href="week-6-regression-ii.html#cb340-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x)) <span class="sc">+</span></span>
<span id="cb340-3"><a href="week-6-regression-ii.html#cb340-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb340-4"><a href="week-6-regression-ii.html#cb340-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(samp_size<span class="sc">~</span>.)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-135-1.png" width="672" /></p>
<p>In class, this should lead to a discussion about how to find quantiles now let’s try to look at some QQ plots.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="week-6-regression-ii.html#cb342-1" aria-hidden="true" tabindex="-1"></a>df_1 <span class="sc">%&gt;%</span> </span>
<span id="cb342-2"><a href="week-6-regression-ii.html#cb342-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">sample=</span>x)) <span class="sc">+</span></span>
<span id="cb342-3"><a href="week-6-regression-ii.html#cb342-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq</span>() <span class="sc">+</span></span>
<span id="cb342-4"><a href="week-6-regression-ii.html#cb342-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq_line</span>()</span></code></pre></div>
<p><img src="test_course_notes_files/figure-html/unnamed-chunk-136-1.png" width="672" /></p>
<p>Let’s try to wrap our heads around what is going on by looking at sorted versions of df_1 values</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="week-6-regression-ii.html#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_1 <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(x))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##       x samp_size
##   &lt;dbl&gt;     &lt;dbl&gt;
## 1  -2.3        25
## 2  -1.7        25
## 3  -1.2        25
## 4  -0.9        25
## 5  -0.8        25
## 6  -0.8        25</code></pre>
<p>Let’s also look at the other end of the dataframe. We can do this either using arrange(desc(x)) or tail instead of head
Confirm that they’re basically two ways of accomplishing the same objective.</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="week-6-regression-ii.html#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_1 <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(x)))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##       x samp_size
##   &lt;dbl&gt;     &lt;dbl&gt;
## 1   2.2        25
## 2   1.1        25
## 3   1          25
## 4   1          25
## 5   0.9        25
## 6   0.7        25</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="week-6-regression-ii.html#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(df_1 <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(x))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##       x samp_size
##   &lt;dbl&gt;     &lt;dbl&gt;
## 1   0.7        25
## 2   0.9        25
## 3   1          25
## 4   1          25
## 5   1.1        25
## 6   2.2        25</code></pre>
<p>End detour</p>
</div>
<div id="generating-data-for-student-happiness-exercise." class="section level3" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Generating data for student happiness exercise.</h3>
<p>We are going to student happiness scores on a scale from 0 to 100 as a function of their time spent outdoors, time spent on Zoom, class standing, and department.</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="week-6-regression-ii.html#cb349-1" aria-hidden="true" tabindex="-1"></a>pop_size <span class="ot">&lt;-</span> <span class="dv">5000</span></span>
<span id="cb349-2"><a href="week-6-regression-ii.html#cb349-2" aria-hidden="true" tabindex="-1"></a>sample_size <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb349-3"><a href="week-6-regression-ii.html#cb349-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-4"><a href="week-6-regression-ii.html#cb349-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-5"><a href="week-6-regression-ii.html#cb349-5" aria-hidden="true" tabindex="-1"></a>pop_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">standing =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;undergrad&quot;</span>, <span class="st">&quot;masters&quot;</span>, <span class="st">&quot;phd&quot;</span>), </span>
<span id="cb349-6"><a href="week-6-regression-ii.html#cb349-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">times =</span> <span class="fu">c</span>(pop_size<span class="sc">/</span><span class="dv">2</span>, pop_size<span class="sc">/</span><span class="dv">4</span>, pop_size<span class="sc">/</span><span class="dv">4</span>)))</span>
<span id="cb349-7"><a href="week-6-regression-ii.html#cb349-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-8"><a href="week-6-regression-ii.html#cb349-8" aria-hidden="true" tabindex="-1"></a>pop_df<span class="sc">$</span>discipline <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;mechanical&quot;</span>, <span class="st">&quot;civil&quot;</span>, <span class="st">&quot;electrical&quot;</span>), </span>
<span id="cb349-9"><a href="week-6-regression-ii.html#cb349-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">length.out =</span> pop_size)</span>
<span id="cb349-10"><a href="week-6-regression-ii.html#cb349-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-11"><a href="week-6-regression-ii.html#cb349-11" aria-hidden="true" tabindex="-1"></a>pop_df<span class="sc">$</span>min_outdoors <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="at">n =</span> pop_size, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">300</span>), <span class="dv">0</span>)</span>
<span id="cb349-12"><a href="week-6-regression-ii.html#cb349-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-13"><a href="week-6-regression-ii.html#cb349-13" aria-hidden="true" tabindex="-1"></a>pop_df<span class="sc">$</span>min_zoom <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="at">n =</span> pop_size, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">400</span>), <span class="dv">0</span>)</span>
<span id="cb349-14"><a href="week-6-regression-ii.html#cb349-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-15"><a href="week-6-regression-ii.html#cb349-15" aria-hidden="true" tabindex="-1"></a>pop_df <span class="ot">&lt;-</span> pop_df <span class="sc">%&gt;%</span> </span>
<span id="cb349-16"><a href="week-6-regression-ii.html#cb349-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">undergrad =</span> <span class="fu">case_when</span>(standing <span class="sc">==</span> <span class="st">&quot;undergrad&quot;</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb349-17"><a href="week-6-regression-ii.html#cb349-17" aria-hidden="true" tabindex="-1"></a>                           <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb349-18"><a href="week-6-regression-ii.html#cb349-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">masters =</span> <span class="fu">case_when</span>(standing <span class="sc">==</span> <span class="st">&quot;masters&quot;</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb349-19"><a href="week-6-regression-ii.html#cb349-19" aria-hidden="true" tabindex="-1"></a>                           <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb349-20"><a href="week-6-regression-ii.html#cb349-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">phd =</span> <span class="fu">case_when</span>(standing <span class="sc">==</span> <span class="st">&quot;phd&quot;</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb349-21"><a href="week-6-regression-ii.html#cb349-21" aria-hidden="true" tabindex="-1"></a>                           <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb349-22"><a href="week-6-regression-ii.html#cb349-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">civil =</span> <span class="fu">case_when</span>(discipline <span class="sc">==</span> <span class="st">&quot;civil&quot;</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb349-23"><a href="week-6-regression-ii.html#cb349-23" aria-hidden="true" tabindex="-1"></a>                           <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb349-24"><a href="week-6-regression-ii.html#cb349-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">mechanical =</span> <span class="fu">case_when</span>(discipline <span class="sc">==</span> <span class="st">&quot;mechanical&quot;</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb349-25"><a href="week-6-regression-ii.html#cb349-25" aria-hidden="true" tabindex="-1"></a>                           <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb349-26"><a href="week-6-regression-ii.html#cb349-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">electrical =</span> <span class="fu">case_when</span>(discipline <span class="sc">==</span> <span class="st">&quot;electrical&quot;</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb349-27"><a href="week-6-regression-ii.html#cb349-27" aria-hidden="true" tabindex="-1"></a>                           <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>))</span></code></pre></div>
<p>With the predictors generated, we can now generate the happiness scores.</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="week-6-regression-ii.html#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="co">#pop_df &lt;- pop_df %&gt;% </span></span>
<span id="cb350-2"><a href="week-6-regression-ii.html#cb350-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(happiness = 50 + -.2*(min_zoom+runif(n = 1, min = 10, max = 30)) + .1 * min_outdoors + 4*civil -.3 * mechanical)</span></span>
<span id="cb350-3"><a href="week-6-regression-ii.html#cb350-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb350-4"><a href="week-6-regression-ii.html#cb350-4" aria-hidden="true" tabindex="-1"></a>b_0 <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb350-5"><a href="week-6-regression-ii.html#cb350-5" aria-hidden="true" tabindex="-1"></a>b_out <span class="ot">&lt;-</span> <span class="fl">0.03</span></span>
<span id="cb350-6"><a href="week-6-regression-ii.html#cb350-6" aria-hidden="true" tabindex="-1"></a>b_zoom <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">0.05</span></span>
<span id="cb350-7"><a href="week-6-regression-ii.html#cb350-7" aria-hidden="true" tabindex="-1"></a>b_civ <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb350-8"><a href="week-6-regression-ii.html#cb350-8" aria-hidden="true" tabindex="-1"></a>b_mech <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb350-9"><a href="week-6-regression-ii.html#cb350-9" aria-hidden="true" tabindex="-1"></a>b_ele <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">3</span></span>
<span id="cb350-10"><a href="week-6-regression-ii.html#cb350-10" aria-hidden="true" tabindex="-1"></a>b_under <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb350-11"><a href="week-6-regression-ii.html#cb350-11" aria-hidden="true" tabindex="-1"></a>b_masters <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">2</span></span>
<span id="cb350-12"><a href="week-6-regression-ii.html#cb350-12" aria-hidden="true" tabindex="-1"></a>b_phd <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb350-13"><a href="week-6-regression-ii.html#cb350-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb350-14"><a href="week-6-regression-ii.html#cb350-14" aria-hidden="true" tabindex="-1"></a>pop_df<span class="sc">$</span>happiness <span class="ot">&lt;-</span> b_0 <span class="sc">+</span> b_out<span class="sc">*</span>(pop_df<span class="sc">$</span>min_outdoors <span class="sc">+</span> <span class="fu">rnorm</span>(pop_size, <span class="dv">0</span>, <span class="dv">40</span>)) <span class="sc">+</span></span>
<span id="cb350-15"><a href="week-6-regression-ii.html#cb350-15" aria-hidden="true" tabindex="-1"></a>  b_zoom<span class="sc">*</span>(pop_df<span class="sc">$</span>min_zoom <span class="sc">+</span> <span class="fu">rnorm</span>(pop_size, <span class="dv">0</span>, <span class="dv">40</span>)) <span class="sc">+</span> </span>
<span id="cb350-16"><a href="week-6-regression-ii.html#cb350-16" aria-hidden="true" tabindex="-1"></a>  b_civ<span class="sc">*</span>(pop_df<span class="sc">$</span>civil <span class="sc">+</span> <span class="fu">rnorm</span>(pop_size, <span class="dv">0</span>, <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb350-17"><a href="week-6-regression-ii.html#cb350-17" aria-hidden="true" tabindex="-1"></a>  b_mech<span class="sc">*</span>pop_df<span class="sc">$</span>mechanical <span class="sc">+</span></span>
<span id="cb350-18"><a href="week-6-regression-ii.html#cb350-18" aria-hidden="true" tabindex="-1"></a>  b_ele<span class="sc">*</span>pop_df<span class="sc">$</span>electrical <span class="sc">+</span> b_under <span class="sc">*</span> pop_df<span class="sc">$</span>undergrad <span class="sc">+</span> </span>
<span id="cb350-19"><a href="week-6-regression-ii.html#cb350-19" aria-hidden="true" tabindex="-1"></a>  b_masters<span class="sc">*</span>pop_df<span class="sc">$</span>masters <span class="sc">+</span></span>
<span id="cb350-20"><a href="week-6-regression-ii.html#cb350-20" aria-hidden="true" tabindex="-1"></a>  b_phd<span class="sc">*</span>pop_df<span class="sc">$</span>phd <span class="sc">+</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="at">n =</span> pop_size, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">10</span>), <span class="dv">0</span>)</span></code></pre></div>
<p>We will save the full population dataset. That is what we will start with in class.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="week-6-regression-ii.html#cb351-1" aria-hidden="true" tabindex="-1"></a>pop_df <span class="sc">%&gt;%</span> <span class="fu">write_csv</span>(<span class="st">&quot;student_happiness.csv&quot;</span>)</span></code></pre></div>
<p>Now we create a sample of students by sampling from the population dataframe.</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="week-6-regression-ii.html#cb352-1" aria-hidden="true" tabindex="-1"></a>samp_df <span class="ot">&lt;-</span> <span class="fu">sample_n</span>(pop_df, <span class="at">size =</span> <span class="dv">200</span>)</span></code></pre></div>
<p>On the modeling side, we can first start with a very simple model with only one predictor.</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="week-6-regression-ii.html#cb353-1" aria-hidden="true" tabindex="-1"></a>happiness_zoom <span class="ot">&lt;-</span> <span class="fu">lm</span>(happiness <span class="sc">~</span> min_zoom, <span class="at">data =</span> samp_df)</span>
<span id="cb353-2"><a href="week-6-regression-ii.html#cb353-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(happiness_zoom)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = happiness ~ min_zoom, data = samp_df)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -38.397  -9.266  -0.983  11.048  44.208 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 61.17095    2.38701  25.627  &lt; 2e-16 ***
## min_zoom    -0.04462    0.01047  -4.259 3.17e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 16.16 on 198 degrees of freedom
## Multiple R-squared:  0.08394,    Adjusted R-squared:  0.07931 
## F-statistic: 18.14 on 1 and 198 DF,  p-value: 3.165e-05</code></pre>
<p>Next, we can look at what happens with a more complex model with multiple predictors. Pay attention to how the <span class="math inline">\(R^2\)</span> value changes.</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="week-6-regression-ii.html#cb355-1" aria-hidden="true" tabindex="-1"></a>happiness_all <span class="ot">&lt;-</span> <span class="fu">lm</span>(happiness <span class="sc">~</span> min_outdoors <span class="sc">+</span> min_zoom <span class="sc">+</span> civil <span class="sc">+</span> mechanical <span class="sc">+</span> electrical <span class="sc">+</span> undergrad <span class="sc">+</span> masters <span class="sc">+</span> phd, <span class="at">data =</span> samp_df)</span>
<span id="cb355-2"><a href="week-6-regression-ii.html#cb355-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(happiness_all)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = happiness ~ min_outdoors + min_zoom + civil + mechanical + 
##     electrical + undergrad + masters + phd, data = samp_df)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -37.922  -9.746  -1.116  12.272  33.192 
## 
## Coefficients: (2 not defined because of singularities)
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  51.880982   3.526718  14.711  &lt; 2e-16 ***
## min_outdoors  0.038552   0.012230   3.152 0.001878 ** 
## min_zoom     -0.045929   0.009842  -4.667 5.72e-06 ***
## civil        10.537767   2.726812   3.865 0.000152 ***
## mechanical   10.887178   2.646000   4.115 5.74e-05 ***
## electrical          NA         NA      NA       NA    
## undergrad    -1.652246   2.599635  -0.636 0.525811    
## masters      -9.938416   3.027577  -3.283 0.001221 ** 
## phd                 NA         NA      NA       NA    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 14.99 on 193 degrees of freedom
## Multiple R-squared:  0.2319, Adjusted R-squared:  0.2081 
## F-statistic: 9.713 on 6 and 193 DF,  p-value: 2.413e-09</code></pre>
<p>An alternative way of writing the full model</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="week-6-regression-ii.html#cb357-1" aria-hidden="true" tabindex="-1"></a>happiness_all <span class="ot">&lt;-</span> <span class="fu">lm</span>(happiness <span class="sc">~</span> min_outdoors <span class="sc">+</span> min_zoom <span class="sc">+</span> discipline <span class="sc">+</span> standing, <span class="at">data =</span> samp_df)</span>
<span id="cb357-2"><a href="week-6-regression-ii.html#cb357-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(happiness_all)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = happiness ~ min_outdoors + min_zoom + discipline + 
##     standing, data = samp_df)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -37.922  -9.746  -1.116  12.272  33.192 
## 
## Coefficients:
##                        Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)           52.480334   3.728491  14.075  &lt; 2e-16 ***
## min_outdoors           0.038552   0.012230   3.152 0.001878 ** 
## min_zoom              -0.045929   0.009842  -4.667 5.72e-06 ***
## disciplineelectrical -10.537767   2.726812  -3.865 0.000152 ***
## disciplinemechanical   0.349411   2.533103   0.138 0.890433    
## standingphd            9.938416   3.027577   3.283 0.001221 ** 
## standingundergrad      8.286170   2.621890   3.160 0.001830 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 14.99 on 193 degrees of freedom
## Multiple R-squared:  0.2319, Adjusted R-squared:  0.2081 
## F-statistic: 9.713 on 6 and 193 DF,  p-value: 2.413e-09</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="week-5-simple-regression.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="week-7-logistic-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["test_course_notes.pdf", "test_course_notes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

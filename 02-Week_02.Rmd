# Week 2: Intro stats, Data & Distributions, Intro R & RStudio

This week, we discuss some very basic ideas related to statistics, data, and working in R. 



## First steps in R


We can create a new variable by assigning it a value with the `<-` operator. Let's create a vector of numbers 1 to 10 with the `seq()` function and then a separate vector that takes each of the x values, multiplies it by 2, and adds 3.
```{r}
x <- seq(1:10)
y <- 2* x + 3
```

Just to make sure everything worked as expected, we can then just type `x` and `y` and R will print their values. We could also look in the "environment" window to see whether those variables (and their expected values) were actually created.

```{r}
x
y

```

So far, so good. If we want to quickly visualize this, we could create a simple scatter plot with the `plot()` command (note: we will come back to plotting data much more in week 3). 

```{r}
plot(x, y)
```


## Getting your R environment set up

One of the first things you will have in any script or .rmd file is a section to load all the libraries that you use in that script.

You can install a library by using the install.packages() function, for example:

`install.packages("tidyverse")`, `install.packages("janitor")`, and `install.packages("psych")`


with this installed, you can then load the package using the library() function

```{r}
library(tidyverse)
library(janitor)
library(psych)
```




## Reading in data

A good first step when working in R is to check which directory you are working in with the `getwd()` function. You should get a directory in response.

```{r}
getwd()

```


You can also check which files are in that directory with `list.files()`.

```{r}

list.files()
```

If you notice that the file you are looking for is not there, then you can use setwd() to change your working directory

`setwd("./Week 2/")`



After that, make sure you have switched to the correct working directory
`getwd()` and then `list.files()`.

Assuming you have directed yourself to the correct place, you can now read in the file(s) that you want to be working with. There are a _lot_ of ways to do this. Since we will be spending a lot of time in class working with .csv files, we will focus on using the `read_csv()` function from the readr package (part of the tidyverse collection of packages). This function will read in the .csv file and store the data as a tibble (a tidyverse version of a data frame, which we can think of as a collection of observations stored in rows with values for variables for each observation stored in columns).

```{r}
prior_survey <- read_csv("ENGE_5714_2021_pre_survey.csv")


```


## Exploring the data

Now that we have loaded in the data, let's take a look at the csv. If we just run a line with the name of the tibble - i.e., `prior_survey` then we should receive a printout that shows the first several rows of that tibble and a listing of all the columns, along with the data types (i.e., double for numeric values, character for strings, etc) of each column.

```{r}
prior_survey

```


When we do this, we see that there are a bunch of columns that have spaces in their names. This is okay (in the sense that R can handle this), but it can be a little frustrating to work with. Let's try cleaning the column names with `clean_names()` from the janitor package. This function will replace the spaces in the column names with underscores and make everything lower case. So, a column name like "I have take a statistics course before" will be changed to "i_have_taken_a_statistics_course_before".

```{r}
prior_survey <- prior_survey %>% clean_names() # from janitor package

```

Look at the data in prior_survey again and see if anything looks different (hint: it should).
```{r}
prior_survey
```


One other function that will we see more in the future is the `table()` function, which will create a table with the counts of the values for a variable. For example, if we wanted to quickly know how students answered the "I have taken a quantitative research methods course before" question, we can run the following:

```{r}
table(prior_survey$i_have_taken_a_quantitative_research_methods_course_before)
```





## Plotting data

We will discuss plotting more next week, but here is a brief preview of what's to come...


There are multiple ways to plot data. Focusing on using ggplot, here are two.

The first way passes the prior_survey dataframe explicitly to ggplot
```{r}
ggplot(data = prior_survey, mapping = aes(x = i_know_what_a_type_i_error_is)) +
  geom_bar() +
  coord_flip()
```

The second way does this implicitly, using the pipe operator. Note that the results should be the same.

```{r}

prior_survey %>% 
  ggplot(mapping = aes(x = i_know_what_a_type_i_error_is)) +
  geom_bar() +
  coord_flip()
```


If we wanted to get extra fancy, we could first convert the data from a wide format to a long format and then start plotting all the items together.


Converting to long format would produce something like this:
```{r}
prior_survey %>% 
  gather(key = "survey_item", value = "survey_response")
```  
  

Then we can combine that with the `group_by()` and `summarize()` functions and plot the results.
```{r}
prior_survey %>% 
  gather(key = "survey_item", value = "survey_response") %>% 
  group_by(survey_item, survey_response) %>% 
  summarize(n = n()) %>% 
  ggplot(mapping = aes(x = survey_response, y = survey_item, fill = n)) +
  geom_tile()
```


This plot is okay for giving a general sense of what is going on in these plots but there are a bunch of other ways to go about doing this.

First, maybe we want to rename the response categories to a numerical scale. We can accomplish this with a `mutate()` and `case_when()`.
```{r}
prior_survey <- prior_survey %>% 
  gather(key = "survey_item", value = "survey_response") %>% 
  mutate(survey_response_num = case_when(survey_response == "Strongly disagree" ~ 0,
                                         survey_response == "Somewhat disagree" ~ 1,
                                         survey_response == "Neither agree nor disagree" ~ 2,
                                         survey_response == "Somewhat agree" ~ 3,
                                         survey_response == "Strongly agree" ~ 4,
                                         )) 
```



Then we plot the same data but with the numerical scale along the x-axis.

```{r}
prior_survey %>% 
  group_by(survey_item, survey_response_num) %>% 
  summarize(n = n()) %>% 
  ggplot(mapping = aes(x = survey_response_num, y = survey_item, fill = n)) +
  geom_tile()
```
  





